>人理解递推，神理解递归   
>
>​									来自“这话我没说过的”的鲁迅

​	递归在程序设计中，有着非常重要的地位，有了递归，我们可以更方便的表达程序逻辑，递归的好处在于其便于大家理解，坏处是计算递归的算法复杂度可能是一件复杂的事，同时，如何写出正确的递归往往需要考虑很多方面。这里，根据MIT的6.046J *Introduction to Algorithm*s相关讲义，谈谈如何求解一个递归表达式的算法复杂度。

1. xjb猜法（最常见的方法）

   对于一个递归方程，我们可以根据经验，套路，或者其他因素，猜一个可能的算法复杂度，然后证明这个复杂度。

   * 猜一个算法复杂度可能的形式
   * 给出证明 通常是归纳法
   * 求解常数

   给一个栗子

   已知递归方程$T(n) = 4 T(\frac{n}{2}) + n $ , 求解其算法复杂度

   Sovle:

      	1. 我们不妨断定$T(1) = \theta(1)$
        2. 根据经验，算法复杂度可能是$O(n^3)$, (xjb猜)
         3. 不妨假设当$k < n$时有$T(k) \le ck^3$ （这个c是参变量）
         4. 证明$T(n)\lt cn^3$

   这就是一个常见的一个套路只要遵循这个套路，最后给出证明，即可，应用的数学原理是数学归纳法

   现在给出第四步的证明

   $T(n) = 4T(\frac{n}{2}) + n$

   根据3的假设有

   $$T(n) \le 4c(\frac{n}{2})^3 + n$$

   整理得

   $$T(n) = cn^3 - ((\frac{c}{2})n^3 -n )$$

   写成这个形式也是必须的，因为我们目标是证明$T(n)\lt cn^3$

   此时，显然可以找到一个$c$与$n$有$\frac{c}{2} n^3 \lt n$成立，即有$T(n) \lt cn^3$

   则得证

   但是，这个方法有一个问题，即xjb猜的话，没有经验的人可能会一脸蒙b，容易猜的过大或过小。

   同时，这个思想不能总得到一个较为准确的上界，上面递归公式的我们猜的上界过大，我们不能证明我们猜的上界即为比较好的上界，这里的好指的是可以更精准的描述这个递归公式，我们可以继续猜测这个递归公式可能有一个更小的上界 $T(n) = O(n^2)$, 继续尝试证明。

   类似地，与之前的套路类似，假设当$k\lt n$有 $T(k) \le ck^2$，尝试证明 $T(n) \le cn^2$ 

   $T(n) = 4 T(\frac{n}{2}) + n $

   带入假设，得

   $T(n) \le 4cn^2 + n$

   这次我们不能得到 $T(n) \lt cn^2$

   那么，我们能否说明$T(n)$的复杂度比$n^2$大呢？

   显然不能！这里我们利用猜测仅仅证明出$T(n) < 4cn^2 + n$，并没有证明$T(n)>n^2$，不能说明$T(n) > n^2$ ，这就是猜测法的缺陷，如何我们错误的构造了复杂度，那么很有可能无法证明正确的结果。此时，我们继续猜测一个可能的上界 $T(n) = O(c_1k^2-c_2k)$，继续尝试证明。

   假设当$k \lt n $有 $T(k) < c_1k^2-c_2k$，尝试继续证明$T(n) < c_1n^2-c_2n$

   $T(n) = 4T(\frac{n}{2}) + n$

   带入假设，得

   $T(n) \le 4(c_1(\frac{n}{2})^2 - c_2(\frac{n}{2})) + n$

   整理得

   $T(n) = c_1n^2-c_2n-(c_2n-n)$

   容易看出，当 $c_2 \gt 1$ 有 $T(n) \le c_1n^2 - c_2n$

   所以可以证明 $T(n)=O(c_1n^2-c_2n)$，又根据放缩有 $T(n) = O(n^2)$

   所以，这个猜测法存在较大的问题，没有很好的普适性。

2. 求解递归树

  可以把递归方程式写成其他的形式，进而求解

  已知$T(n) = T(\frac{n}{4}) + T(\frac{n}{2}) + n^2$

  $T(\frac{n}{4}) = T(\frac{n}{16}) + T(\frac{n}{8})+ (\frac{n}{4})^2$

  $T(\frac{n}{2}) = T(\frac{n}{8}) + T(\frac{n}{4}) + (\frac{n}{2})^2$

  $\ldots$

  $T(n) = n^2 (1 + \frac{5}{16} + (\frac{5}{16})^2 ++ (\frac{5}{16})^3+ \cdots )$

  $T(n) = \Theta(n^2)$

3. 套公式法

   适用于符合下面形式的式子

   $T(n) = aT(\frac{n}{b}) + f(n)$     $a \ge 1 \& b\gt 1 \& f(n) \gt 0$

   然后比较$f(n)$ 与 $n^{log_ba}$ 的大小

   * 当存在一个$\epsilon \gt 0$ 有 $f(n)  = O(n^{log_ba-\epsilon})$ 即意味着$f(n)$在多项式时间内增长的比$n^{log_ba}$要慢，所以，$T(n) = \Theta(n^{log_ba})$
   * 当存在一个$k \gt 0$ 有 $f(n) = \Theta(n^{log_ba} \lg^k n)$ 即意味着$f(n)$与$n^{log_ba}$增长速率相同，所以有，$T(n) = \Theta(n^{log_ba} \lg ^{k+1} n)$
   * 当存在一个$\epsilon \gt 0$ 有 $f(n) = \Omega(n^{log_ba+\epsilon})$ 即意味着$f(n)$在多项式时间内增长的比$n^{log_ba}$要快,所以，$T(n) = \Theta(f(n))$

   证明方式和第二种类似

   $T(\frac{n}{b}) = aT(\frac{n}{b^2}) + f(\frac{n}{b})$